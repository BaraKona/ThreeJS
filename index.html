<!DOCTYPE html>
<html lang="en">
<head>
    <div class = "title">
        <meta charset="UTF-8">
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Three.js</title>
        <link rel = "stylesheet" href="./css/main.css">
        <h1> THREE.JS SCNDI</h1>
    </div>
</head>
<body>
    <section class = "scene"> 
                <!--imports three.js-->
        <script src="./js/three.js"></script>
        <script src="./js/OrbitControls.js"></script>
        <script src="./js/FirstPersonControls.js"></script>
        <script src="./js/ObjectLoader.js"></script>
        <!--<script src="./js/FlyControls.js"></script>-->
        <script type = "module" src=./js/GLTFLoader.js></script>
                <!--allows us to animate our project-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>
            <script type= "module">
                import { GLTFLoader } from "./js/GLTFLoader.js";
                /* Creates a scene*/
                var scene = new THREE.Scene();
                /*Create a camera. In this case we will create a perspective camera
                   This takes as input (Field of view, aspect ratio, near plane, far plane )*/
                var camera = new THREE.PerspectiveCamera( 75 , window.innerWidth / window.innerHeight, 0.1, 10000 );
                /*Create renderer, eg WebGL, css3D, svg renderer etc*/
                var renderer = new THREE.WebGLRenderer({ antialias: true });
                /*Sets a kind of background*/
                //renderer.setClearColor("#e5e5e5");   

                //initialise object loader for obj 3d files
                //const objLoader = new OBJLoader();
                //objLoader.load('Natural_Birch.obj', (root) => {
                //    scene.add(root);
                //})
                //Sets the size of the window (width, height)
                var width = window.innerWidth * 1.0;
                var height = window.innerHeight * .70;
                renderer.setSize( width, height);
                
                document.body.appendChild( renderer.domElement );
    
                window.addEventListener( 'resize', function( ){
                    window.innerWidth = width;
                    window.innerHeight = height;
                    renderer.setSize( width, height);
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix( );
                })
    
                //Allows control
                var controls = new THREE.OrbitControls( camera, renderer.domElement );
    
                //Create GLTF loader object
                var loader = new GLTFLoader();
                //Create object for rotation
                var obj;
                //var material = new THREE.MeshBasicMaterial({ color: 0xFFFFFF, wireframe: true });
               // const material = new THREE.MeshBasicMaterial();
               // material.metalness = 0.7;
               // material.roughness = 0.7;
                //Loads model.
                loader.load( "Lemon_Sorbet.gltf", function(gltf){
                    obj = gltf.scene;
                    //If you want to change the material of the gltf. In this case did not work
                    obj.material = new THREE.MeshStandardMaterial();
                    //sets scale of object (x,y,z)
                    obj.scale.set( .2, .29, .2 );
                    
                    scene.add(gltf.scene);
                });

                //const gui = new dat.GUI();
                //add gui
                //gui.add(light.position, 'y');
                
                scene.background = new THREE.Color(0xFFE185);
                //Add lighting to a scene
                
                var light = new THREE.HemisphereLight( 0xffffff, 0x000000, 2 );
                var light1 = new THREE.PointLight ( 0xffffff, 1.50);
                light1.position.x = 2;
                light1.position.y = 3;
                light1.position.z = 2;
                scene.add(light1);
                var light2 = new THREE.PointLight ( 0xffffff, 1.5);
                light2.position.x = -5000;
                light2.position.y = 5000;
                light2.position.z = 1000;
                scene.add(light2);
                var light3 = new THREE.PointLight ( 0xffffff, 1.5);
                light3.position.x = 50000;
                light3.position.y = 50000;
                light3.position.z = 10000;
                scene.add(light3);
                //var ambientLight = new THREE.ambientLight(0xFFFFFF, 1000);
                
                var directionalLight = new THREE.DirectionalLight(0xffffff, 1000);
                
                // Set camera position
                //camera.position.z = 10;
                //Camera position (x,y,z)
                camera.position.set(700, 400, 1250);
                
                //make model move when you scroll down
                const updateObj = (event) => {
                    obj.position.y = window.scrollY* 0.001;
                }
                window.addEventListener('scroll', updateObj);
                //Make model follow mouse
                document.addEventListener('mousemove', onDocumentMouseMove);

                let mouseX = 0;
                let mouseY = 0;

                let targetX = 0;
                let targetY = 0;

                const windowX = window.innerWidth /2;
                const windowY = window.innerHeight /2;

                function onDocumentMouseMove (event) {
                    mouseX = (event.clientX - windowX)
                    mouseY = (event.clientY - windowY)
                }

                var update = function( )
                {
                //Makes it so when you move your mouse the obj follows
                    
                    targetX = mouseX * .001;
                    targetY = mouseY * .001;
                    obj.rotation.y += .5 * (targetX - obj.rotation.y);
                };
                //draw scene
                var render = function( )
                {     
                    renderer.render( scene, camera );
                }; 
                //run game loop (update, render, repeat)
                var GameLoop = function ( ) 
                {
                    requestAnimationFrame( GameLoop );  
                    update();
                    render();
                };
                GameLoop();
            </script>
        </section>
        <section class = "do">
        <div class = "container">
            <div class = "text">
                <h1>
                    What we do:
                </h1>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Integer quis auctor 
                    elit sed. Lorem mollis aliquam ut porttitor leo a diam sollicitudin. Risus pretium quam vulputate dignissim. Eu scelerisque felis imperdiet proin 
                    fermentum leo vel orci. In cursus turpis massa tincidunt dui ut ornare. Odio morbi quis commodo odio aenean. Adipiscing bibendum est ultricies integer 
                    quis auctor elit sed. Cursus in hac habitasse platea dictumst. Ut lectus arcu bibendum at. Vitae auctor eu augue ut lectus arcu bibendum. Sit amet 
                    consectetur adipiscing elit duis tristique sollicitudin. Ullamcorper a lacus vestibulum sed arcu non odio euismod.
                </p>   
            </div>   
            <canvas class = "webgl">

            </canvas>
        </div>  
    </section>    
    <section class = "next">
        <div> 
            <h1>
                Trial 3
            </h1>
        </div>
    </section>
    <section class = "next1">
        <div> 
            <h1>
                
            </h1>
        </div>
    </section>
</body>
<footer>
   
</footer>

</html>